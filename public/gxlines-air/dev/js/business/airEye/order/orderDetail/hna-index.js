hna._i18nMap.addLanguages({
    "CT01": {"zh_CN": "旅客及航段信息", "en_US": "Shopping Cart"},
    "CT02": {"zh_CN": "操作说明", "en_US": "Shopping Cart"},
    "CT03": {"zh_CN": "辅营详情", "en_US": "Shopping Cart"},
    "CT04": {"zh_CN": "订单支付信息", "en_US": "Shopping Cart"},
    "CT05": {"zh_CN": "订单详情", "en_US": "Shopping Cart"},
    "CT06": {"zh_CN": "选座", "en_US": "Shopping Cart"},
    "CT07": {"zh_CN": "保险", "en_US": "Shopping Cart"},

    "OT11": {"zh_CN": "订单状态", "en_US": ""},
    "OT12": {"zh_CN": "订单编号", "en_US": ""},
    "OT13": {"zh_CN": "航班信息", "en_US": "Shopping Cart"},
    "OT14": {"zh_CN": "订单金额", "en_US": "Shopping Cart"},
    "OT15": {"zh_CN": "未付金额", "en_US": "Shopping Cart"},
    "OT16": {"zh_CN": "预订时间", "en_US": "Shopping Cart"},
    "OT17": {"zh_CN": "出票时限", "en_US": "Shopping Cart"},
    "OT18": {"zh_CN": "支付时限", "en_US": "Shopping Cart"},
    "OT19": {"zh_CN": "已付金额", "en_US": "Shopping Cart"},
    "OT20": {"zh_CN": "联系人姓名", "en_US": "Shopping Cart"},
    "OT21": {"zh_CN": "联系电话", "en_US": "Shopping Cart"},
    "OT22": {"zh_CN": "邮箱", "en_US": "Shopping Cart"},
    "OT23": {"zh_CN": "积分抵扣", "en_US": "Shopping Cart"},
    "OT24": {"zh_CN": "订单来源", "en_US": "Shopping Cart"},
    "OT25": {"zh_CN": "证件类型", "en_US": "Shopping Cart"},
    "OT26": {"zh_CN": "证件号码", "en_US": "Shopping Cart"},
    "OT27": {"zh_CN": "旅客类型", "en_US": "Shopping Cart"},
    "OT28": {"zh_CN": "常旅客卡号", "en_US": "Shopping Cart"},
    "OT29": {"zh_CN": "客票类型", "en_US": "Shopping Cart"},
    "OT30": {"zh_CN": "系统编号", "en_US": "Shopping Cart"},
    "OT31": {"zh_CN": "航段", "en_US": "Shopping Cart"},
    "OT32": {"zh_CN": "舱位", "en_US": "Shopping Cart"},
    "OT33": {"zh_CN": "座位号", "en_US": "Shopping Cart"},
    "OT34": {"zh_CN": "产品名称", "en_US": "Shopping Cart"},
    "OT35": {"zh_CN": "票面价", "en_US": "Shopping Cart"},
    "OT36": {"zh_CN": "应付", "en_US": "Shopping Cart"},
    "OT37": {"zh_CN": "税费", "en_US": "Shopping Cart"},
    "OT38": {"zh_CN": "票价总额", "en_US": "Shopping Cart"},
    "OT39": {"zh_CN": "机票状态", "en_US": "Shopping Cart"},
    "OT40": {"zh_CN": "旅客姓名", "en_US": "Shopping Cart"},
    "OT41": {"zh_CN": "辅营类型", "en_US": "Shopping Cart"},
    "OT42": {"zh_CN": "辅营名称", "en_US": "Shopping Cart"},
    "OT43": {"zh_CN": "金额", "en_US": "Shopping Cart"},
    "OT44": {"zh_CN": "航班日期", "en_US": "Shopping Cart"},
    "OT45": {"zh_CN": "购买状态", "en_US": "Shopping Cart"},
    "OT46": {"zh_CN": "操作", "en_US": "Shopping Cart"},
    "OT47": {"zh_CN": "起飞-到达时间", "en_US": "Shopping Cart"},
    "OT48": {"zh_CN": "承运人", "en_US": "Shopping Cart"},
    "OT49": {"zh_CN": "税费总额：", "en_US": "Shopping Cart"},
    "OT50": {"zh_CN": "确定要关闭吗?", "en_US": "Shopping Cart"},

    "OB01": {"zh_CN": "退票", "en_US": "Shopping Cart"},
    "OB02": {"zh_CN": "改期", "en_US": "Shopping Cart"},
    "OB03": {"zh_CN": "支付差错退款", "en_US": "Shopping Cart"},
    "OB04": {"zh_CN": "购买辅营", "en_US": "Shopping Cart"},
    "OB05": {"zh_CN": "取消订单", "en_US": "Shopping Cart"},
    "OB06": {"zh_CN": "继续支付", "en_US": "Shopping Cart"},
    "OB07": {"zh_CN": "订单列表", "en_US": "Shopping Cart"},
    "OB08": {"zh_CN": "关闭窗口", "en_US": "Shopping Cart"},
    "OB09": {"zh_CN": "打印此页", "en_US": "Shopping Cart"},
    "OB10": {"zh_CN": "取消辅营", "en_US": "Shopping Cart"},
    "OB11": {"zh_CN": "选择座位", "en_US": "Shopping Cart"},
    "OB12": {"zh_CN": "取消保险", "en_US": "Shopping Cart"},
    "OB13": {"zh_CN": "取消座位", "en_US": "Shopping Cart"},

    "OP01": {"zh_CN": "支付流水号", "en_US": "Shopping Cart"},
    "OP02": {"zh_CN": "支付方式", "en_US": "Shopping Cart"},
    "OP03": {"zh_CN": "支付金额", "en_US": "Shopping Cart"},
    "OP04": {"zh_CN": "支付时间", "en_US": "Shopping Cart"},
    "OP05": {"zh_CN": "支付返回时间", "en_US": "Shopping Cart"},
    "OP06": {"zh_CN": "支付结果", "en_US": "Shopping Cart"},
    "OP07": {"zh_CN": "支付类型", "en_US": "Shopping Cart"},
    "OP08": {"zh_CN": "交易处理费", "en_US": "Shopping Cart"},

    "OW01": {"zh_CN": "确定要取消订单吗?", "en_US": "Shopping Cart"},
    "OW02": {"zh_CN": "订单取消成功", "en_US": "Shopping Cart"},
    "OW021": {"zh_CN": "，{0}秒钟刷新页面！", "en_US": "Shopping Cart"},
    "OW03": {"zh_CN": "确认取消辅营吗？", "en_US": "Shopping Cart"},
    "OW04": {"zh_CN": "请选择要取消的辅营？", "en_US": "Shopping Cart"},
    "OW05": {"zh_CN": "确定要继续支付吗？", "en_US": "Shopping Cart"},
    "OW06": {"zh_CN": "确认取消保险吗？", "en_US": "Shopping Cart"},
    "OW07": {"zh_CN": "请选择要取消的保险？", "en_US": "Shopping Cart"},

    "DR01": {"zh_CN": "退票信息", "en_US": "Shopping Cart"},
    "DR02": {"zh_CN": "退单号", "en_US": "Shopping Cart"},
    "DR03": {"zh_CN": "退票申请时间", "en_US": "Shopping Cart"},
    "DR04": {"zh_CN": "申请人", "en_US": "Shopping Cart"},
    "DR05": {"zh_CN": "退票状态", "en_US": "Shopping Cart"},
    "DR06": {"zh_CN": "实退金额", "en_US": "Shopping Cart"},
    "DR07": {"zh_CN": "关联票号航段", "en_US": "Shopping Cart"},
    "DR08": {"zh_CN": "退票审核时间", "en_US": "Shopping Cart"},
    "DR09": {"zh_CN": "退票信息", "en_US": "Shopping Cart"},
    "DR10": {"zh_CN": "退辅营信息", "en_US": "Shopping Cart"},
    "DR11": {"zh_CN": "实扣金额", "en_US": "Shopping Cart"},
    "DR12": {"zh_CN": "系统正在获取航班状态，请等待...", "en_US": "Shopping Cart"}
});
var ajaxUrl = {
    getOrderDetail: "/order/getOrderDetail",
    getOrderPaymentDetail: "/order/getOrderPaymentDetail",
    getOrderRefundDetail: "/order/getOrderRefundDetail",
    cancelOrder: "/order/cancelOrder",
    cancelMarket: "/order/cancelMarket",
    cancelInsurance: "/order/cancelInsurance",
    getFlightStatusList: "/airU/getFlightStatusList"
};

//订单对象
var _oInfo = {};
//订单号
var _orderCode = getOrderCodeBuyUrl();
//行程类型
var _tripType = "OW";
//格式后的退票和退辅营信息
var _refundData = {};
//全局退辅营按钮是否显示
var _veteranCamp = false;

var _hasLoading = false;

var _flightSegmentStr = "";

var _orderInfo = {};
var _productInfo = {};

$(function () {
    //页面点击事件
    document.oncontextmenu=new Function("event.returnValue=false;"); //静止右键
    //document.onselectstart=new Function("event.returnValue=false;");
    $(document).on("click", ".click-btn", function (e) {
        e.stopPropagation();
        try {
            var $this = $(e.target);
            if ($this.hasClass("hnaui-btn-disabled")) {
                return false;
            }
            if ($this.hasClass("p-panel-toggle")) {//显示隐藏乘机人面板
                $this.parents(".p-panel").find(".p-panel-body").toggle();
                $this.toggleClass("down");
            }
            var url = "";
            var orderCode = hna.compile(_orderCode);
            if ($this.hasClass('hna-refundTickets')) {
                //退票
                goToPage("/airEye/order/refundTickets?orderCode=" + orderCode);

            } else if ($this.hasClass('hna-changeOrder')) {
                //升舱改期
                goToPage("/airEye/order/changeOrder?orderCode=" + orderCode);

            } else if ($this.hasClass('hna-changeSeat')) {
                //修改座位
                goToPage("/airEye/seat_mmb?orderCode=" + orderCode);

            } else if ($this.hasClass('hna-changeMarket')) {
                //修改辅营
                goToPage("/airEye/product_mmb?orderCode=" + orderCode + "&flight=" + hna.compile(_flightSegmentStr));

            } else if ($this.hasClass('hna-cancelOrder')) {
                //取消订单
                cancelOrder();

            } else if ($this.hasClass('hna-orderList')) {
                //订单列表
                goToPage("/airEye/order/orderList");

            } else if ($this.hasClass('hna-closeWindow')) {
                //关闭窗口
                //关闭窗口
                hnaer.confirm(_i18n("OT50"), {
                    title: "提示"
                }, function(n) {
                    e.stopPropagation();
                    hna.closeWebPage();
                });

            } /*else if ($this.hasClass('hna-send')) {
             //发送我的行程副本
             }*/ else if ($this.hasClass('hna-print')) {
                //打印此页
                preview(1);

            } else if ($this.hasClass('hna-cancelMarket')) {
                //取消辅营
                cancelMarket();

            } else if ($this.hasClass('hna-continue-payment')) {
                //继续支付
                continuePayment();

            } else if ($this.hasClass('hna-cancelInsurance')) {
                //取消保险
                continueInsurance();

            } else if ($this.hasClass('flight-number-btn')) {
                //查看航班动态
                getFlightNumberStatus($this);

            }
        } catch (ev) {
            JsErrorTips(ev);
        }
    });

    //获取机场信息
    try {
        hna.jsData.getFlightCityData(function (data) {
            _flightCityData = data;
            getOrderDetail();
            getOrderPaymentDetail();
            getOrderRefundDetail();

            //清空本地的新订单号
            hna._processData.saveNewOrderCoder();
        });
        hna.goToTop("1");
    } catch (e) {
        JsErrorTips(e);
    }
});