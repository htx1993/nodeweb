webpackJsonp([22,31],{8:function(e,t,s){s(11);var i=s(1)(s(9),s(12),null,null);e.exports=i.exports},9:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},mounted:function(){},props:{show:{type:Boolean,default:!0},noData:{type:Boolean,default:!1},text:{type:String,default:"暂时没有相关内容"}},beforeDestroy:function(){}}},10:function(e,t,s){t=e.exports=s(2)(),t.push([e.id,".loading_container{position:absolute;top:30%;left:0;width:100%;text-align:center;color:#585858}.loading_container .icon-refresh{font-size:1.2rem}","",{version:3,sources:["/./src/components/common/loading.vue"],names:[],mappings:"AACA,mBAAmB,kBAAkB,QAAQ,OAAO,WAAW,kBAAkB,aAAa,CAC7F,AACD,iCAAiC,gBAAgB,CAChD",file:"loading.vue",sourcesContent:["\n.loading_container{position:absolute;top:30%;left:0;width:100%;text-align:center;color:#585858\n}\n.loading_container .icon-refresh{font-size:1.2rem\n}"],sourceRoot:"webpack://"}])},11:function(e,t,s){var i=s(10);"string"==typeof i&&(i=[[e.id,i,""]]);s(3)(i,{});i.locals&&(e.exports=i.locals)},12:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{mode:"out-in","enter-active-class":"fadeIn animated"}},[e.show?s("div",{staticClass:"loading_container"},[e.noData?e._e():s("div",[s("i",{staticClass:"icon-refresh animated rotate infinite"}),e._v(" "),s("span",[e._v("正在努力加载，请稍后")])]),e._v(" "),e.noData?s("div",[e._v(e._s(e.text))]):e._e()]):e._e()])},staticRenderFns:[]}},21:function(e,t,s){"use strict";function i(e){e=(e||"").toUpperCase(),"ADT"===e||"ADULT"===e?this.code="ADT":"CNN"===e||"CHILD"===e?this.code="CNN":"INF"===e||"INFANT"===e?this.code="INF":this.code=e}Object.defineProperty(t,"__esModule",{value:!0}),t._filterPassInfo=t._filterPassType=t._passTypeList=void 0;var a=s(13),n=t._passTypeList=[{code:"ADT",name:"成人",info:"12周岁以上"},{code:"CNN",name:"儿童",info:"2到12周岁"},{code:"INF",name:"婴儿",info:"14天到2周岁"}];t._filterPassType=function(e){return(0,a._filterType)(new i(e).code,n)},t._filterPassInfo=function(e){e||(e="");var t="";return(n||[]).forEach(function(s){if(s.code==e)return void(t=s.name+"（"+s.info+"）")}),t}},75:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPassTypeByBirthday=t.Passenger=void 0;var i=s(37),a=s(48),n=s(26),r=s(15),o=(t.Passenger=function(e){e||(e={}),this.id=e.id||"",this.countryType=e.countryType||"0",this.userId=e.userId||"",this.passType=e.passType||"ADT",this.firstName=e.firstName||"",this.lastName=e.lastName||"",this.fullName=(0,n.getFullName)(this.firstName,this.lastName),this.idType=new i.IDType(e.idType).code,this.idNo=e.idNo||"",this.sex=new a.Sex(e.sex).code,this.birthday=e.birthday||"",this.phone=e.phone||"";var t=new n.Mobile(e);this.mobilePre=t.mobilePre,this.mobile=t.mobile,this.email=e.email||"",this.country=e.country||"",this.cardIssueCountry=e.cardIssueCountry||"",this.cardNo=e.cardNo||"",this.cardValidDate=e.cardValidDate||"",this.saveToAirU=e.saveToAirU||"N","1"==this.countryType&&(this.idType=new i.IDType("2.DOC").code,!this.idNo&&this.cardNo?this.idNo=this.cardNo:this.idNo&&!this.cardNo&&(this.cardNo=this.idNo)),this.referenceDate=e.referenceDate||r._date.getDateInfo().date,this.birthday&&(this.passType=o(this.birthday,this.referenceDate)||this.passType)},t.getPassTypeByBirthday=function(e,t){var s=r._date.addYear(-12,t),i=r._date.addYear(-2,t),a=r._date.addDate(-14,t);return e<=s?"ADT":e>s&&e<=i?"CNN":e>i&&e<=a?"INF":""})},379:function(e,t,s){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(7),n=i(a),r=s(6),o=s(14),l=s(8),c=i(l),d=s(5),A=s(75),u=s(37),f=s(21),p=s(15);t.default={data:function(){return{passengerList:[],ADT:[],CNN:[],INF:[],isDomestic:"",loadingShow:!0,noData:!1}},mounted:function(){this.isDomestic=this.SFI.isDomestic,this.GET_REFERENCE_TIME(),this.initData()},filters:{_filterIdType:u._filterIdType,_filterPassType:f._filterPassType},directives:{TransferDom:o.TransferDom},components:{XHeader:o.XHeader,CheckIcon:o.CheckIcon,loading:c.default},computed:(0,n.default)({},(0,r.mapState)(["travellerInfo","userInfo","SFI","referenceTime"]),{guestNum:function(){var e=this.SFI.guestTypes;return{ADT:e[0].amount,CNN:e[1].amount,INF:e[2].amount}},selectedTravellerNum:function(){return{ADT:this.travellerInfo.num.ADT,CNN:this.travellerInfo.num.CNN,INF:this.travellerInfo.num.INF}}}),methods:(0,n.default)({},(0,r.mapMutations)(["TOAST","LOGOUT","GET_TRAVELLER_INFO","SET_TRAVELLER_INFO","SET_CURRENT_PASSENGER_INFO","GET_REFERENCE_TIME"]),{initData:function(){var e=this;this.loadingShow=!0,this.GET_TRAVELLER_INFO(),this.ADT=[],this.CNN=[],this.INF=[],(0,d.getTravellers)({countryType:"Y"===this.isDomestic?0:1,userID:this.userInfo.id}).then(function(t){t&&200===t.code&&t.data&&e.filterData(t.data.travellerList)})},filterData:function(e){var t=e.length;if(t>0){this.loadingShow=!1;for(var s=0;s<t;s++){e[s].referenceDate=this.referenceTime;var i=new A.Passenger(e[s]);i.checkBtn=!1;for(var a=0;a<this.travellerInfo.list.length;a++)this.travellerInfo.list[a].id===i.id&&(i.checkBtn=!0);var n="Y"==this.isDomestic?"0":"1",r=p._date.addMonth(6,this.referenceTime),o=p._date.addYear(10,this.referenceTime);i.countryType==n&&("0"==n||"1"==n&&i.cardValidDate>=r&&i.cardValidDate<=o)&&("ADT"===i.passType?this.ADT.push(i):"CNN"===i.passType?this.CNN.push(i):this.INF.push(i)),this.passengerList=this.ADT.concat(this.CNN).concat(this.INF)}}else this.noData=!0},saveAndBack:function(){var e=this,t=[],s=this;for(var i in this.travellerInfo.num)this.travellerInfo.num[i]=0;return(this.passengerList||[]).forEach(function(s){s.checkBtn&&(t.push(s),"ADT"!==s.passType&&"CNN"!==s.passType&&"INF"!==s.passType||e.travellerInfo.num[s.passType]++)}),this.selectedTravellerNum.ADT!==this.guestNum.ADT||this.selectedTravellerNum.CNN!==this.guestNum.CNN||this.selectedTravellerNum.INF!==this.guestNum.INF?(this.TOAST({type:"optionTips",text:"您应该选择: "+s.guestNum.ADT+"个成人，"+s.guestNum.CNN+"个儿童，"+s.guestNum.INF+"个婴儿！"}),!1):(this.SET_TRAVELLER_INFO({list:t,num:this.selectedTravellerNum}),this.$router.go(-1),void this.$emit("on-choose"))},createPassenger:function(){this.SET_CURRENT_PASSENGER_INFO(new A.Passenger({countryType:"Y"===this.isDomestic?"0":"1"})),this.$router.push("/mobile/passenger/addPassenger/edit/add_tra")}})}},467:function(e,t,s){t=e.exports=s(2)(),t.push([e.id,".allcover{position:absolute;top:0;right:0}.center{left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.center,.ct{position:absolute;top:50%}.ct{-webkit-transform:translateY(-50%);transform:translateY(-50%)}.cl{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.add-passenger .title{margin:.3rem .8rem;color:#e2000c}.add-passenger .new-passenger{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-weight:300;color:#3190e8;background-color:#fff;padding:.2rem 0}.add-passenger .pass-list{background-color:#fff}.add-passenger .pass-list li{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 .5rem;line-height:2rem;border-bottom:1px solid #d8d8d8}.add-passenger .pass-list li .vux-check-icon{display:block;-webkit-box-flex:1;-ms-flex:1;flex:1}.add-passenger .pass-list li .vux-check-icon .id-msg{float:right;color:#999;font-size:.5rem;line-height:2rem;margin-left:.2rem}.add-passenger .pass-list li:last-child{border-bottom:none}","",{version:3,sources:["/./src/page/passenger/children/addPassenger.vue"],names:[],mappings:"AACA,UAAU,kBAAkB,MAAM,OAAO,CACxC,AACD,QAAkC,SAAS,uCAAwC,AAAoC,8BAA+B,CACrJ,AACD,YAFQ,kBAAkB,OAAQ,CAGjC,AADD,IAA8B,mCAAmC,AAA+B,0BAA0B,CACzH,AACD,IAAI,kBAAkB,SAAS,mCAAmC,AAA+B,0BAA0B,CAC1H,AACD,sBAAsB,mBAAmB,aAAa,CACrD,AACD,8BAA8B,oBAAoB,AAAqB,oBAAoB,aAAa,yBAAyB,sBAAsB,AAA2B,mBAAmB,wBAAwB,AAA+B,qBAAqB,uBAAuB,gBAAgB,cAAc,sBAAsB,eAAe,CAC1W,AACD,0BAA0B,qBAAqB,CAC9C,AACD,6BAA6B,oBAAoB,AAAqB,oBAAoB,aAAa,yBAAyB,AAAsC,sBAAsB,8BAA8B,yBAAyB,AAA2B,sBAAsB,mBAAmB,eAAe,iBAAiB,+BAA+B,CACrX,AACD,6CAA6C,cAAc,mBAAmB,AAAe,WAAW,MAAM,CAC7G,AACD,qDAAqD,YAAY,WAAW,gBAAgB,iBAAiB,iBAAiB,CAC7H,AACD,wCAAwC,kBAAkB,CACzD",file:"addPassenger.vue",sourcesContent:["\n.allcover{position:absolute;top:0;right:0\n}\n.center{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%)\n}\n.ct{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)\n}\n.cl{position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)\n}\n.add-passenger .title{margin:.3rem .8rem;color:#e2000c\n}\n.add-passenger .new-passenger{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-weight:300;color:#3190e8;background-color:#fff;padding:.2rem 0\n}\n.add-passenger .pass-list{background-color:#fff\n}\n.add-passenger .pass-list li{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:0 .5rem;line-height:2rem;border-bottom:1px solid #D8D8D8\n}\n.add-passenger .pass-list li .vux-check-icon{display:block;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1\n}\n.add-passenger .pass-list li .vux-check-icon .id-msg{float:right;color:#999;font-size:.5rem;line-height:2rem;margin-left:.2rem\n}\n.add-passenger .pass-list li:last-child{border-bottom:none\n}"],sourceRoot:"webpack://"}])},523:function(e,t,s){var i=s(467);"string"==typeof i&&(i=[[e.id,i,""]]);s(3)(i,{});i.locals&&(e.exports=i.locals)},616:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slide-panel add-passenger grayBg"},[s("x-header",{attrs:{title:"添加乘机人","left-options":{backText:""}}},[s("div",{staticClass:"save-btn",attrs:{slot:"right"},on:{click:e.saveAndBack},slot:"right"},[e._v("保存")])]),e._v(" "),s("loading",{attrs:{show:e.loadingShow,"no-data":e.noData}}),e._v(" "),s("div",{staticClass:"slide-content"},[s("div",{staticClass:"new-passenger",on:{click:e.createPassenger}},[s("i",{staticClass:"icon-plus"}),e._v("新增乘机人\n        ")]),e._v(" "),e.ADT.length>0?s("div",[s("div",{staticClass:"title"},[e._v("成人")]),e._v(" "),s("ul",{staticClass:"pass-list"},e._l(e.ADT,function(t){return s("li",[s("check-icon",{attrs:{value:t.checkBtn},on:{"update:value":function(s){e.$set(t,"checkBtn",s)}}},[s("span",[e._v(e._s(t.fullName))]),e._v(" "),s("span",{staticClass:"id-msg"},[e._v("\n                            "+e._s(e._f("_filterIdType")(t.idType))+"  "+e._s(t.idNo)+"\n                        ")])])],1)}))]):e._e(),e._v(" "),e.CNN.length>0&&0!==e.guestNum.CNN?s("div",[s("div",{staticClass:"title"},[e._v("儿童")]),e._v(" "),s("ul",{staticClass:"pass-list"},e._l(e.CNN,function(t){return s("li",[s("check-icon",{attrs:{value:t.checkBtn},on:{"update:value":function(s){e.$set(t,"checkBtn",s)}}},[s("span",[e._v(e._s(t.fullName))]),e._v(" "),s("span",{staticClass:"id-msg"},[e._v("\n                            "+e._s(e._f("_filterIdType")(t.idType))+"  "+e._s(t.idNo)+"\n                        ")])])],1)}))]):e._e(),e._v(" "),e.INF.length>0&&0!==e.guestNum.INF?s("div",[s("div",{staticClass:"title"},[e._v("婴儿")]),e._v(" "),s("ul",{staticClass:"pass-list"},e._l(e.INF,function(t){return s("li",[s("check-icon",{attrs:{value:t.checkBtn},on:{"update:value":function(s){e.$set(t,"checkBtn",s)}}},[s("span",[e._v(e._s(t.fullName))]),e._v(" "),s("span",{staticClass:"id-msg"},[e._v("\n                            "+e._s(e._f("_filterIdType")(t.idType))+"  "+e._s(t.idNo)+"\n                        ")])])],1)}))]):e._e()]),e._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("transition",{attrs:{mode:"out-in","enter-active-class":"slideInRight animated","leave-active-class":"slideOutRight animated"}},[s("router-view",{on:{"on-add":e.initData}})],1)],1)],1)},staticRenderFns:[]}},691:function(e,t,s){s(523);var i=s(1)(s(379),s(616),null,null);e.exports=i.exports}});